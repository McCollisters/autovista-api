// Extract and format the JSON from the log message
const logMessage = `{"level":"info","message":"Public Quote CREATE (via /quote/public) - Full Response Output","portalId":"64ece35abfc3deb98e9d180f","quoteUniqueId":220396,"response":"{\\n  \\"quoteTableVehicles\\": [],\\n  \\"quoteTablePricing\\": [],\\n  \\"publicAPI\\": false,\\n  \\"isCustomerPortal\\": true,\\n  \\"createdAt\\": \\"2025-11-17T00:51:51.925Z\\",\\n  \\"status\\": \\"Saved\\",\\n  \\"companyName\\": \\"McCollister's Instant Quote\\",\\n  \\"customerCode\\": \\"4F3273EB2E\\",\\n  \\"userName\\": \\"Customer\\",\\n  \\"userId\\": null,\\n  \\"portalId\\": \\"64ece35abfc3deb98e9d180f\\",\\n  \\"portal\\": \\"64ece35abfc3deb98e9d180f\\",\\n  \\"instance\\": null,\\n  \\"commission\\": 0,\\n  \\"pickupAddressUnformatted\\": \\"San Diego, CA\\",\\n  \\"deliveryAddressUnformatted\\": \\"Boston, MA \\",\\n  \\"customerFullName\\": \\"Michael Manthei\\",\\n  \\"customerEmail\\": \\"michael.manthei@hklaw.com\\",\\n  \\"customerPhone\\": \\"(617) 308-9162\\",\\n  \\"pickup\\": \\"San Diego, CA\\",\\n  \\"delivery\\": \\"Boston, MA \\",\\n  \\"miles\\": 3001,\\n  \\"transitTime\\": [\\n    5,\\n    14\\n  ],\\n  \\"transportType\\": \\"WHITEGLOVE\\",\\n  \\"totalPricing\\": {\\n    \\"1\\": {\\n      \\"totalSD\\": 5997,\\n      \\"totalPortal\\": 5997,\\n      \\"name\\": \\"1-Day Pickup\\",\\n      \\"days\\": \\"1\\",\\n      \\"totalCompanyTariff\\": 0,\\n      \\"totalWhiteGloveTransportSD\\": 5997,\\n      \\"totalWhiteGloveTransportPortal\\": 5997,\\n      \\"totalSuvMarkup\\": 0,\\n      \\"totalVanMarkup\\": 0,\\n      \\"totalPickupMarkup\\": 0,\\n      \\"totalEnclosedMarkup\\": 0,\\n      \\"totalInoperableMarkup\\": 0,\\n      \\"totalFuelMarkup\\": 0\\n    },\\n    \\"3\\": {\\n      \\"totalSD\\": 5997,\\n      \\"totalPortal\\": 5997,\\n      \\"name\\": \\"3-Day Pickup\\",\\n      \\"days\\": \\"3\\",\\n      \\"totalCompanyTariff\\": 0,\\n      \\"totalWhiteGloveTransportSD\\": 5997,\\n      \\"totalWhiteGloveTransportPortal\\": 5997,\\n      \\"totalSuvMarkup\\": 0,\\n      \\"totalVanMarkup\\": 0,\\n      \\"totalPickupMarkup\\": 0,\\n      \\"totalEnclosedMarkup\\": 0,\\n      \\"totalInoperableMarkup\\": 0,\\n      \\"totalFuelMarkup\\": 0\\n    },\\n    \\"5\\": {\\n      \\"totalSD\\": 5997,\\n      \\"totalPortal\\": 5997,\\n      \\"name\\": \\"5-Day Pickup\\",\\n      \\"days\\": \\"5\\",\\n      \\"totalCompanyTariff\\": 0,\\n      \\"totalWhiteGloveTransportSD\\": 5997,\\n      \\"totalWhiteGloveTransportPortal\\": 5997,\\n      \\"totalSuvMarkup\\": 0,\\n      \\"totalVanMarkup\\": 0,\\n      \\"totalPickupMarkup\\": 0,\\n      \\"totalEnclosedMarkup\\": 0,\\n      \\"totalInoperableMarkup\\": 0,\\n      \\"totalFuelMarkup\\": 0\\n    },\\n    \\"7\\": {\\n      \\"totalSD\\": 5997,\\n      \\"totalPortal\\": 5997,\\n      \\"name\\": \\"7-Day Pickup\\",\\n      \\"days\\": \\"7\\",\\n      \\"totalCompanyTariff\\": 0,\\n      \\"totalWhiteGloveTransportSD\\": 5997,\\n      \\"totalWhiteGloveTransportPortal\\": 5997,\\n      \\"totalSuvMarkup\\": 0,\\n      \\"totalVanMarkup\\": 0,\\n      \\"totalPickupMarkup\\": 0,\\n      \\"totalEnclosedMarkup\\": 0,\\n      \\"totalInoperableMarkup\\": 0,\\n      \\"totalFuelMarkup\\": 0\\n    }\\n  },\\n  \\"discount\\": 5,\\n  \\"zipModifierAmt\\": 0,\\n  \\"modelModifierAmt\\": 0,\\n  \\"portalAdminDiscount\\": 0,\\n  \\"vehicleQuotes\\": [\\n    {\\n      \\"make\\": \\"ASTON MARTIN\\",\\n      \\"model\\": \\"VANQUISH\\",\\n      \\"pricingClass\\": \\"Sedan\\",\\n      \\"operable\\": \\"true\\",\\n      \\"operableBool\\": true,\\n      \\"calculatedQuotes\\": [\\n        {\\n          \\"name\\": \\"1-Day Pickup\\",\\n          \\"days\\": \\"1\\",\\n          \\"baseQuote\\": 6002,\\n          \\"commission\\": 0,\\n          \\"companyTariff\\": 0,\\n          \\"enclosedMarkup\\": 0,\\n          \\"serviceLevelMarkup\\": 0,\\n          \\"suvMarkup\\": 0,\\n          \\"vanMarkup\\": 0,\\n          \\"pickupMarkup\\": 0,\\n          \\"inoperableMarkup\\": 0,\\n          \\"fuelMarkup\\": 0,\\n          \\"enclosedModifier\\": 0,\\n          \\"totalSD\\": 5997,\\n          \\"totalPortal\\": 5997,\\n          \\"whiteGloveTransportSD\\": 5997,\\n          \\"whiteGloveTransportPortal\\": 5997,\\n          \\"_id\\": \\"691a71a7d401a644cf70f229\\"\\n        },\\n        {\\n          \\"name\\": \\"3-Day Pickup\\",\\n          \\"days\\": \\"3\\",\\n          \\"baseQuote\\": 6002,\\n          \\"commission\\": 0,\\n          \\"companyTariff\\": 0,\\n          \\"enclosedMarkup\\": 0,\\n          \\"serviceLevelMarkup\\": 0,\\n          \\"suvMarkup\\": 0,\\n          \\"vanMarkup\\": 0,\\n          \\"pickupMarkup\\": 0,\\n          \\"inoperableMarkup\\": 0,\\n          \\"fuelMarkup\\": 0,\\n          \\"enclosedModifier\\": 0,\\n          \\"totalSD\\": 5997,\\n          \\"totalPortal\\": 5997,\\n          \\"whiteGloveTransportSD\\": 5997,\\n          \\"whiteGloveTransportPortal\\": 5997,\\n          \\"_id\\": \\"691a71a7d401a644cf70f22a\\"\\n        },\\n        {\\n          \\"name\\": \\"5-Day Pickup\\",\\n          \\"days\\": \\"5\\",\\n          \\"baseQuote\\": 6002,\\n          \\"commission\\": 0,\\n          \\"companyTariff\\": 0,\\n          \\"enclosedMarkup\\": 0,\\n          \\"serviceLevelMarkup\\": 0,\\n          \\"suvMarkup\\": 0,\\n          \\"vanMarkup\\": 0,\\n          \\"pickupMarkup\\": 0,\\n          \\"inoperableMarkup\\": 0,\\n          \\"fuelMarkup\\": 0,\\n          \\"enclosedModifier\\": 0,\\n          \\"totalSD\\": 5997,\\n          \\"totalPortal\\": 5997,\\n          \\"whiteGloveTransportSD\\": 5997,\\n          \\"whiteGloveTransportPortal\\": 5997,\\n          \\"_id\\": \\"691a71a7d401a644cf70f22b\\"\\n        },\\n        {\\n          \\"name\\": \\"7-Day Pickup\\",\\n          \\"days\\": \\"7\\",\\n          \\"baseQuote\\": 6002,\\n          \\"commission\\": 0,\\n          \\"companyTariff\\": 0,\\n          \\"enclosedMarkup\\": 0,\\n          \\"serviceLevelMarkup\\": 0,\\n          \\"suvMarkup\\": 0,\\n          \\"vanMarkup\\": 0,\\n          \\"pickupMarkup\\": 0,\\n          \\"inoperableMarkup\\": 0,\\n          \\"fuelMarkup\\": 0,\\n          \\"enclosedModifier\\": 0,\\n          \\"totalSD\\": 5997,\\n          \\"totalPortal\\": 5997,\\n          \\"whiteGloveTransportSD\\": 5997,\\n          \\"whiteGloveTransportPortal\\": 5997,\\n          \\"_id\\": \\"691a71a7d401a644cf70f22c\\"\\n        }\\n      ],\\n      \\"_id\\": \\"691a71a7d401a644cf70f228\\"\\n    }\\n  ],\\n  \\"_id\\": \\"691a71a7d401a644cf70f227\\",\\n  \\"updatedAt\\": \\"2025-11-17T00:51:51.925Z\\",\\n  \\"uniqueId\\": 220396,\\n  \\"__v\\": 0\\n}","userEmail":"customer"}`;

try {
  const parsed = JSON.parse(logMessage);
  const response = JSON.parse(parsed.response);
  console.log(JSON.stringify(response, null, 2));
} catch (error) {
  console.error("Error parsing JSON:", error.message);
  process.exit(1);
}
